steps:
  - apply:
      manifests:
        paths:
        - https://raw.githubusercontent.com/sololabs/demos/b523571c66057a5591bce22ad896729f1fee662b/petclinic_demo/petclinic.yaml
        - https://raw.githubusercontent.com/sololabs/demos/b523571c66057a5591bce22ad896729f1fee662b/petclinic_demo/petclinic-db.yaml
      values:
        # By setting this, valet will wait till all the pods are ready in the default namespace (where petclinic is installed)
        Namespace: default
  - apply:
      manifest:
        path: vs-petclinic-1.yaml
  - curl:
      path: /
      statusCode: 200
      service:
        name: gateway-proxy
        namespace: gloo-system
